<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>éŠ·å”®åˆ†é¡å ±è¡¨</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">
  <div class="container my-5">
    <h2 class="text-center mb-4">ğŸ“Š éŠ·å”®åˆ†é¡äº’å‹•å ±è¡¨</h2>
    <div class="row">
      <div class="col-md-6">
        <canvas id="barChart"></canvas>
      </div>
      <div class="col-md-6">
        <canvas id="pieChart"></canvas>
      </div>
    </div>
  </div>

  <script>
    fetch("/api/sales_summary")
      .then(res => res.json())
      .then(data => {
        const labels = data.map(d => d.åˆ†é¡);
        const values = data.map(d => d.é‡‘é¡);
        const colors = ["#3498db", "#2ecc71", "#f39c12", "#e74c3c", "#8e44ad"];

        new Chart(document.getElementById("barChart"), {
          type: "bar",
          data: {
            labels,
            datasets: [{
              label: "å„åˆ†é¡é‡‘é¡",
              data: values,
              backgroundColor: colors
            }]
          },
          options: {
            responsive: true,
            plugins: {
              title: { display: true, text: "åˆ†é¡é‡‘é¡é•·æ¢åœ–" }
            }
          }
        });

        new Chart(document.getElementById("pieChart"), {
          type: "pie",
          data: {
            labels,
            datasets: [{
              label: "åˆ†é¡ä½”æ¯”",
              data: values,
              backgroundColor: colors
            }]
          },
          options: {
            responsive: true,
            plugins: {
              title: { display: true, text: "åˆ†é¡ä½”æ¯”åœ“é¤…åœ–" }
            }
          }
        });
      });
  </script>
</body>
</html>
